---
# Secret: Stores sensitive data like passwords, tokens, keys
# Values are base64-encoded (NOT encrypted - just encoded!)
#
# IMPORTANT SECURITY NOTES:
# 1. DO NOT commit real secrets to git
# 2. Use external secret management (Vault, AWS Secrets Manager, etc.) for production
# 3. Use sealed-secrets, external-secrets, or similar tools for GitOps
# 4. Kubernetes secrets are only base64-encoded, not encrypted at rest by default
# 5. Enable encryption at rest in your cluster configuration
#
# To create base64 values:
#   echo -n "your-secret-value" | base64
#
# To decode:
#   echo "base64-string" | base64 -d

apiVersion: v1
kind: Secret
metadata:
  name: devcontainer-secrets
  labels:
    app: devcontainer
    component: development
type: Opaque

# Option 1: Base64-encoded values
data:
  # Example database password (value: "example-password-change-me")
  db-password: ZXhhbXBsZS1wYXNzd29yZC1jaGFuZ2UtbWU=

  # Example API token (value: "example-token-12345")
  api-token: ZXhhbXBsZS10b2tlbi0xMjM0NQ==

  # Example SSH private key (value: "fake-ssh-key")
  ssh-private-key: ZmFrZS1zc2gta2V5

  # Example GPG key (value: "fake-gpg-key")
  gpg-private-key: ZmFrZS1ncGcta2V5

# Option 2: Plain-text values (Kubernetes will base64-encode them)
# Useful for testing, but still don't commit real secrets!
stringData:
  # Example: Database connection string
  database-url: "postgresql://user:password@localhost:5432/dbname"

  # Example: AWS credentials (NEVER commit real AWS keys!)
  aws-access-key-id: "FAKE_ACCESS_KEY_ID_12345"
  aws-secret-access-key: "FAKE_SECRET_ACCESS_KEY_ABCDEFGHIJKLMNOP"

  # Example: GitHub token (use GitHub secrets or external secret management)
  github-token: "FAKE_GITHUB_TOKEN_REPLACE_ME"

  # Example: Docker registry credentials (for pulling private images)
  # This is a special format for .dockerconfigjson
  # .dockerconfigjson: |
  #   {
  #     "auths": {
  #       "ghcr.io": {
  #         "username": "your-username",
  #         "password": "your-token",
  #         "auth": "base64-of-username:password"
  #       }
  #     }
  #   }

---
# Example: Docker registry secret (for pulling private images)
# This is a special secret type for container registries
# Create with: kubectl create secret docker-registry regcred \
#   --docker-server=ghcr.io \
#   --docker-username=your-username \
#   --docker-password=your-token \
#   --docker-email=your-email@example.com

# apiVersion: v1
# kind: Secret
# metadata:
#   name: regcred
#   labels:
#     app: devcontainer
# type: kubernetes.io/dockerconfigjson
# data:
#   .dockerconfigjson: <base64-encoded-docker-config>

---
# PRODUCTION SECRET MANAGEMENT OPTIONS
#
# Instead of storing secrets directly in Kubernetes, use one of these approaches:
#
# 1. External Secrets Operator (recommended)
#    - Syncs secrets from external stores (Vault, AWS, Azure, GCP)
#    - https://external-secrets.io/
#
#    Example:
#    apiVersion: external-secrets.io/v1beta1
#    kind: ExternalSecret
#    metadata:
#      name: devcontainer-secrets
#    spec:
#      refreshInterval: 1h
#      secretStoreRef:
#        name: vault-backend
#        kind: SecretStore
#      target:
#        name: devcontainer-secrets
#      data:
#      - secretKey: db-password
#        remoteRef:
#          key: database/prod
#          property: password
#
# 2. Sealed Secrets
#    - Encrypt secrets that can be safely committed to git
#    - https://github.com/bitnami-labs/sealed-secrets
#
#    Example:
#    apiVersion: bitnami.com/v1alpha1
#    kind: SealedSecret
#    metadata:
#      name: devcontainer-secrets
#    spec:
#      encryptedData:
#        db-password: AgA7V8xd... (encrypted value)
#
# 3. HashiCorp Vault
#    - Use Vault Agent Injector to inject secrets at runtime
#    - https://www.vaultproject.io/docs/platform/k8s
#
#    Example annotations:
#    vault.hashicorp.com/agent-inject: "true"
#    vault.hashicorp.com/agent-inject-secret-db: "database/creds/readonly"
#    vault.hashicorp.com/role: "devcontainer"
#
# 4. Cloud Provider Secret Managers
#    - AWS Secrets Manager + External Secrets Operator
#    - Azure Key Vault + CSI driver
#    - GCP Secret Manager + External Secrets Operator
