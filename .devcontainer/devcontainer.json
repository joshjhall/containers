{
  "name": "Containers Development",
  "dockerComposeFile": "docker-compose.yml",
  "service": "devcontainer",
  "workspaceFolder": "/workspace/${localWorkspaceFolderBasename}",

  // Don't use features in VS Code. Rather, use the container features to be consistent across environments.
  // "features": {},

  // Container environment variables
  // "containerEnv": {
  //   "SKIP_CASE_CHECK": "true"  // Suppress case-sensitivity warning if you're aware of limitations
  // },

  // Auto-detect and configure Docker socket GID before container starts
  // This allows Docker commands to work without sudo or permission changes
  "initializeCommand": "bash -c './bin/setup-docker-socket.sh'",

  // Auto-configure git hooks, development environment, and SSH keys after container starts
  "postStartCommand": "bash -c './bin/setup-dev-environment.sh && ./.devcontainer/setup-git-ssh.sh'",

  "customizations": {
    "vscode": {
      "extensions": [
        "ms-azuretools.vscode-docker",
        "donjayamanne.githistory",
        "usernamehw.errorlens",
        "streetsidesoftware.code-spell-checker",
        "wayou.vscode-todo-highlight",
        "esbenp.prettier-vscode",
        "ms-vscode.makefile-tools",
        "bierner.markdown-mermaid",
        "Anthropic.claude-code"
      ],

      "settings": {
        // General editor settings
        "editor.formatOnSave": true,
        "editor.codeActionsOnSave": {
          "source.organizeImports": "explicit"
        },

        // Terminal settings
        "terminal.integrated.defaultProfile.linux": "bash",
        "terminal.integrated.profiles.linux": {
          "bash": {
            "path": "/bin/bash",
            "args": ["-l"]
          }
        }
      }
    }
  },

  "remoteUser": "vscode"
}
